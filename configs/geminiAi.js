const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
   // safetySettings: Adjust safety settings
   // See https://ai.google.dev/gemini-api/docs/safety-settings
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate travel plan for location: Amaravati, Andhra Pradesh, India for 3 Days and 2 nights for Just Me with a Moderate budget with a Flight details, Flight Price with booking url, Hotels Options list with HotelName, Hotel addres, Price, hotel image url, geo coordinates, rating, descriptions and places to visit nearby with placeName, Place details, place image url, Geo coordinates, ticket pricing, Time to travel each of the location for 3 days and 2 nights with each day plan with best time to visit in JSON format"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"flightDetails\": {\n    \"flight\": \"IndiGo Airlines\",\n    \"flightNumber\": \"6E-6254\",\n    \"departureCity\": \"Bangalore\",\n    \"arrivalCity\": \"Vijayawada\",\n    \"departureDate\": \"2023-12-15\",\n    \"arrivalDate\": \"2023-12-15\",\n    \"departureTime\": \"10:00 AM\",\n    \"arrivalTime\": \"11:30 AM\",\n    \"price\": \"₹4,500\",\n    \"bookingUrl\": \"https://www.goindigo.in/\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"The Gateway Hotel, Vijayawada\",\n      \"hotelAddress\": \"NH-16, Vijayawada - Guntur Highway, Ibrahimpatnam, Vijayawada, Andhra Pradesh 521137\",\n      \"price\": \"₹4,000 per night\",\n      \"hotelImageUrl\": \"https://www.tajhotels.com/content/dam/taj/images/hotels/india/andhra-pradesh/the-gateway-hotel-vijayawada/gallery/exterior-01.jpg\",\n      \"geoCoordinates\": \"16.5492, 80.6128\",\n      \"rating\": 4.5,\n      \"description\": \"A modern and luxurious hotel with a rooftop pool, restaurant, and bar. Offers a comfortable and convenient stay.\"\n    },\n    {\n      \"hotelName\": \"Radisson Blu Plaza Hotel, Vijayawada\",\n      \"hotelAddress\": \"Besant Road, Vijayawada, Andhra Pradesh 520010\",\n      \"price\": \"₹3,500 per night\",\n      \"hotelImageUrl\": \"https://www.radissonhotels.com/en-us/hotels/radisson-blu-plaza-hotel-vijayawada\",\n      \"geoCoordinates\": \"16.5057, 80.6285\",\n      \"rating\": 4.0,\n      \"description\": \"A well-maintained hotel with multiple dining options, fitness center, and business facilities.\"\n    },\n    {\n      \"hotelName\": \"Treebo Trend The Grand\",\n      \"hotelAddress\": \"NH-16, Ibrahimpatnam, Vijayawada, Andhra Pradesh 521137\",\n      \"price\": \"₹2,500 per night\",\n      \"hotelImageUrl\": \"https://images.treebo.com/uploads/hotel_images/treebo-trend-the-grand/the-grand-vijayawada-andhra-pradesh-india-0-4.jpg\",\n      \"geoCoordinates\": \"16.5494, 80.6122\",\n      \"rating\": 3.5,\n      \"description\": \"A budget-friendly hotel with basic amenities, suitable for a comfortable stay.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"time\": \"11:30 AM\",\n      \"activity\": \"Arrive at Vijayawada Airport, check into your hotel, and relax for a while.\",\n      \"location\": {\n        \"placeName\": \"Vijayawada Airport\",\n        \"placeDetails\": \"Located 16 km from the city center, it is the primary airport serving Vijayawada.\",\n        \"placeImageUrl\": \"https://www.aai.aero/sites/default/files/images/airports/vijayawada.jpg\",\n        \"geoCoordinates\": \"16.5343, 80.6065\"\n      }\n    },\n    \"day1\": {\n      \"time\": \"1:00 PM\",\n      \"activity\": \"Lunch at a local restaurant.\",\n      \"location\": {\n        \"placeName\": \"Aahar\",\n        \"placeDetails\": \"A popular restaurant serving authentic Andhra cuisine.\",\n        \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/0e/b5/b3/1f/aahar-restaurant.jpg\",\n        \"geoCoordinates\": \"16.5057, 80.6285\"\n      }\n    },\n    \"day1\": {\n      \"time\": \"2:00 PM\",\n      \"activity\": \"Visit Undavalli Caves, ancient rock-cut caves with intricate sculptures.\",\n      \"location\": {\n        \"placeName\": \"Undavalli Caves\",\n        \"placeDetails\": \"A magnificent example of ancient rock-cut architecture.\",\n        \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Undavalli_Caves_A.jpg/1280px-Undavalli_Caves_A.jpg\",\n        \"geoCoordinates\": \"16.5034, 80.5507\",\n        \"ticketPricing\": \"₹10 per person\"\n      }\n    },\n    \"day1\": {\n      \"time\": \"5:00 PM\",\n      \"activity\": \"Explore Kanaka Durga Temple, a revered Hindu temple on the Indrakeeladri Hill.\",\n      \"location\": {\n        \"placeName\": \"Kanaka Durga Temple\",\n        \"placeDetails\": \"A famous temple dedicated to Goddess Durga.\",\n        \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Kanaka_Durga_Temple_Vijayawada.jpg/1280px-Kanaka_Durga_Temple_Vijayawada.jpg\",\n        \"geoCoordinates\": \"16.5177, 80.6301\"\n      }\n    },\n    \"day1\": {\n      \"time\": \"7:00 PM\",\n      \"activity\": \"Dinner at a restaurant near your hotel.\",\n      \"location\": {\n        \"placeName\": \"The Grand Kakatiya\",\n        \"placeDetails\": \"A multi-cuisine restaurant known for its delicious food.\",\n        \"placeImageUrl\": \"https://images.google.com/search?q=the+grand+kakatiya+vijayawada&tbm=isch\",\n        \"geoCoordinates\": \"16.5057, 80.6285\"\n      }\n    },\n    \"day2\": {\n      \"time\": \"9:00 AM\",\n      \"activity\": \"Visit the Bhavani Island, a picturesque island on the Krishna River.\",\n      \"location\": {\n        \"placeName\": \"Bhavani Island\",\n        \"placeDetails\": \"A popular tourist spot offering boating and other water activities.\",\n        \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Bhavani_Island_Vijayawada.jpg/1280px-Bhavani_Island_Vijayawada.jpg\",\n        \"geoCoordinates\": \"16.5070, 80.6406\"\n      }\n    },\n    \"day2\": {\n      \"time\": \"12:00 PM\",\n      \"activity\": \"Lunch at a restaurant on Bhavani Island.\",\n      \"location\": {\n        \"placeName\": \"Island Restaurant\",\n        \"placeDetails\": \"Offers delicious seafood and other dishes with a beautiful river view.\",\n        \"placeImageUrl\": \"https://images.google.com/search?q=island+restaurant+bhavani+island&tbm=isch\",\n        \"geoCoordinates\": \"16.5070, 80.6406\"\n      }\n    },\n    \"day2\": {\n      \"time\": \"2:00 PM\",\n      \"activity\": \"Explore the Victoria Jubilee Museum, showcasing a collection of artifacts and art.\",\n      \"location\": {\n        \"placeName\": \"Victoria Jubilee Museum\",\n        \"placeDetails\": \"A museum showcasing the history and culture of Andhra Pradesh.\",\n        \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Victoria_Jubilee_Museum_Vijayawada.jpg/1280px-Victoria_Jubilee_Museum_Vijayawada.jpg\",\n        \"geoCoordinates\": \"16.5057, 80.6285\"\n      }\n    },\n    \"day2\": {\n      \"time\": \"5:00 PM\",\n      \"activity\": \"Visit the Mogalarajapuram Caves, another set of ancient rock-cut caves.\",\n      \"location\": {\n        \"placeName\": \"Mogalarajapuram Caves\",\n        \"placeDetails\": \"Rock-cut caves with Buddhist motifs and sculptures.\",\n        \"placeImageUrl\": \"https://www.andhrawisdom.com/wp-content/uploads/2017/03/Mogalarajapuram-Caves-Vijayawada.jpg\",\n        \"geoCoordinates\": \"16.5034, 80.5507\"\n      }\n    },\n    \"day2\": {\n      \"time\": \"7:00 PM\",\n      \"activity\": \"Dinner at a local restaurant.\",\n      \"location\": {\n        \"placeName\": \"The Biryani Blues\",\n        \"placeDetails\": \"A popular restaurant known for its flavorful biryani.\",\n        \"placeImageUrl\": \"https://images.google.com/search?q=the+biryani+blues+vijayawada&tbm=isch\",\n        \"geoCoordinates\": \"16.5057, 80.6285\"\n      }\n    },\n    \"day3\": {\n      \"time\": \"9:00 AM\",\n      \"activity\": \"Visit the Undavalli Caves again for a sunrise experience.\",\n      \"location\": {\n        \"placeName\": \"Undavalli Caves\",\n        \"placeDetails\": \"A magnificent example of ancient rock-cut architecture.\",\n        \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Undavalli_Caves_A.jpg/1280px-Undavalli_Caves_A.jpg\",\n        \"geoCoordinates\": \"16.5034, 80.5507\",\n        \"ticketPricing\": \"₹10 per person\"\n      }\n    },\n    \"day3\": {\n      \"time\": \"11:00 AM\",\n      \"activity\": \"Enjoy a traditional Andhra breakfast at a local eatery.\",\n      \"location\": {\n        \"placeName\": \"Sri Venkateswara Tiffin Center\",\n        \"placeDetails\": \"A popular local joint serving delicious South Indian breakfast.\",\n        \"placeImageUrl\": \"https://images.google.com/search?q=sri+venkateswara+tiffin+center+vijayawada&tbm=isch\",\n        \"geoCoordinates\": \"16.5057, 80.6285\"\n      }\n    },\n    \"day3\": {\n      \"time\": \"12:00 PM\",\n      \"activity\": \"Check out of your hotel and head to Vijayawada Railway Station for your departure.\",\n      \"location\": {\n        \"placeName\": \"Vijayawada Railway Station\",\n        \"placeDetails\": \"The primary railway station serving Vijayawada.\",\n        \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Vijayawada_Junction_railway_station.jpg/1280px-Vijayawada_Junction_railway_station.jpg\",\n        \"geoCoordinates\": \"16.5171, 80.6319\"\n      }\n    }\n  }\n}\n```\n\n**Notes:**\n\n* This is a suggested itinerary, and you can customize it based on your interests and preferences.\n* Flight prices are approximate and can vary depending on the time of year and availability.\n* Hotel prices are also approximate and can vary based on room type and season.\n* The itinerary assumes you are traveling by air, but you can easily adjust it for travel by train or bus.\n* Consider checking out local festivals and events happening during your trip.\n* It is always recommended to book your flights and accommodation in advance, especially if you are traveling during peak season.\n* Be sure to carry cash for local transportation, small purchases, and entrance fees.\n* Enjoy your trip to Amaravati!\n"},
          ],
        },
      ],
    });
  
    